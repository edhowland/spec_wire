#!/usr/bin/env bash

### check for running server
if [ ! -f ruby_server.pid ] ; then
  # start service, if no PID file
  ./ruby_server.rb >& sinatra.out &
  echo $? > ruby_server.pid 
elif ! ps -p $(cat ruby_server.pid) >& /dev/null ; then
  # start service, if PID file does not contain a valid PID
  echo start ./ruby_server.rb 2
else
  echo server already running
fi

